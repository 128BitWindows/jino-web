<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>Trade Tracker</title>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />
	<link rel="stylesheet" href="css/styles.css">
</head>
<body id="trade-tracker">
	<nav class="navbar navbar-dark bg-dark">
		<div class="container">
			<a class="navbar-brand" href="index.html">
				<span class="navbar-back-icon">←</span> Jino
			</a>
		</div>
	</nav>

	<main class="container my-4">
		<section class="tracker-hero mb-4">
			<div class="d-flex justify-content-between align-items-center flex-wrap gap-3">
				<div>
					<h1 class="tracker-title">Trade Tracker</h1>
					<p class="tracker-subtitle">Set compounding goals, log each trading day, and stay accountable.</p>
				</div>
				<button type="button" id="openSettings" class="btn btn-dark settings-button" aria-label="Open settings">
					<span class="settings-icon">⚙</span> Settings
				</button>
			</div>
		</section>

		<section class="row g-4 mb-5">
			<div class="col-md-3">
				<div class="summary-card">
					<p class="summary-label">Current Equity</p>
					<p class="summary-value" id="summaryEquity">$0.00</p>
				</div>
			</div>
			<div class="col-md-3">
				<div class="summary-card">
					<p class="summary-label">Today's Target End</p>
					<p class="summary-value" id="summaryTargetEnd">$0.00</p>
				</div>
			</div>
			<div class="col-md-3">
				<div class="summary-card">
					<p class="summary-label">Daily Target %</p>
					<p class="summary-value" id="summaryTargetPct">0%</p>
				</div>
			</div>
			<div class="col-md-3">
				<div class="summary-card">
					<p class="summary-label">Max Drawdown</p>
					<p class="summary-value" id="summaryDrawdown">0%</p>
				</div>
			</div>
		</section>

		<section class="row g-4 mb-5">
			<div class="col-lg-6">
				<div class="panel">
					<h2 class="panel-title">Today's Target</h2>
					<div class="target-grid">
						<div>
							<p class="target-label">Trading Day</p>
							<p class="target-value" id="targetDay">Day 0</p>
						</div>
						<div>
							<p class="target-label">Target Start</p>
							<p class="target-value" id="targetStart">$0.00</p>
						</div>
						<div>
							<p class="target-label">Target End</p>
							<p class="target-value" id="targetEnd">$0.00</p>
						</div>
						<div>
							<p class="target-label">Target Gain</p>
							<p class="target-value" id="targetGain">$0.00</p>
						</div>
					</div>
					<button type="button" id="addDay" class="btn btn-outline-primary mt-3">Add Trading Day</button>
				</div>
			</div>
			<div class="col-lg-6">
				<div class="panel">
					<h2 class="panel-title">Current Day</h2>
					<div id="currentDayCard" class="current-day-card"></div>
				</div>
			</div>
		</section>

		<section class="row g-4 mb-5">
			<div class="col-lg-4">
				<div class="panel">
					<h2 class="panel-title">Accountability</h2>
					<div class="metric">
						<span>Win Rate</span>
						<strong id="metricWinRate">0%</strong>
					</div>
					<div class="metric">
						<span>Avg Green Day</span>
						<strong id="metricAvgGreen">0%</strong>
					</div>
					<div class="metric">
						<span>Avg Red Day</span>
						<strong id="metricAvgRed">0%</strong>
					</div>
					<div class="metric">
						<span>Profit Factor</span>
						<strong id="metricProfitFactor">0</strong>
					</div>
					<div class="metric">
						<span>Goal-Hit Streak</span>
						<strong id="metricGoalStreak">0</strong>
					</div>
					<div class="metric">
						<span>Green Streak</span>
						<strong id="metricGreenStreak">0</strong>
					</div>
				</div>
			</div>
			<div class="col-lg-8">
				<div class="panel">
					<h2 class="panel-title">History</h2>
					<div class="d-flex flex-wrap gap-2 mb-3">
						<button type="button" class="btn btn-outline-secondary filter-button active" data-filter="all">All</button>
						<button type="button" class="btn btn-outline-secondary filter-button" data-filter="goal">Met Goal</button>
						<button type="button" class="btn btn-outline-secondary filter-button" data-filter="green">Green</button>
						<button type="button" class="btn btn-outline-secondary filter-button" data-filter="neutral">Neutral</button>
						<button type="button" class="btn btn-outline-secondary filter-button" data-filter="red">Red</button>
					</div>
					<div class="table-responsive">
						<table class="table table-striped align-middle">
							<thead>
								<tr>
									<th>Date</th>
									<th>Day</th>
									<th>Target Start</th>
									<th>Target End</th>
									<th>Actual Close</th>
									<th>Trading %</th>
									<th>Status</th>
									<th>Edit</th>
								</tr>
							</thead>
							<tbody id="historyBody"></tbody>
						</table>
					</div>
				</div>
			</div>
		</section>
	</main>

	<script src="./tradeTracker.js" defer></script>

	<dialog id="settingsDialog" class="settings-dialog">
		<form id="setupForm" class="panel settings-panel" method="dialog">
			<div class="d-flex justify-content-between align-items-center mb-3">
				<h2 class="panel-title mb-0">Settings</h2>
				<button type="button" id="closeSettings" class="btn btn-outline-secondary btn-sm">Close</button>
			</div>
			<div class="row g-3">
				<div class="col-md-6">
					<label class="form-label" for="startingCapital">Starting Capital</label>
					<input class="form-control" id="startingCapital" type="number" min="0" step="0.01" placeholder="10000" required />
				</div>
				<div class="col-md-6">
					<label class="form-label" for="dailyTargetPct">Daily Target %</label>
					<input class="form-control" id="dailyTargetPct" type="number" min="0" step="0.01" placeholder="1" required />
				</div>
				<div class="col-md-6">
					<label class="form-label" for="startDate">Start Date (Day 1)</label>
					<input class="form-control" id="startDate" type="date" required />
				</div>
				<div class="col-md-6">
					<label class="form-label" for="targetGoal">Target Goal</label>
					<input class="form-control" id="targetGoal" type="number" min="0" step="0.01" placeholder="25000" required />
				</div>
				<div class="col-12 d-flex flex-wrap gap-2">
					<button type="submit" class="btn btn-primary">Save Settings</button>
					<button type="button" id="resetAll" class="btn btn-outline-danger">Reset All</button>
				</div>
			</div>
			<hr class="my-4">
			<h3 class="panel-title">Backup</h3>
			<div class="d-flex flex-wrap gap-2">
				<button type="button" id="exportData" class="btn btn-outline-primary">Export JSON</button>
				<label class="btn btn-outline-primary mb-0">
					Import JSON
					<input id="importData" type="file" accept="application/json" class="d-none" />
				</label>
			</div>
			<p class="small text-muted mt-2">Data is saved locally in your browser.</p>
		</form>
	</dialog>
</body>
</html>
